# OpenFOAM-Motion-Extraction

This repository contains a collection of scripts for extracting motion data from OpenFOAM log files. The main script, `run_post.sh`, automates the process of running the other scripts and should be the only one that needs to be executed. To run `run_post.sh`, use "chmod +x ./run_post.sh" in the Terminal to give it permission and run it in the Terminal with "./run_post.sh".

## Usage

To use these scripts, simply run `run_post.sh` in your terminal. This will call the other scripts in the correct order to extract motion data from your OpenFOAM log files.

If you encounter an error when running `createWGs_T150.py`, you can uncomment line 44 of the code: `# casefoam.CaseType = 'Decomposed Case'` to let the program read the decomposed files instead of the reconstructed files.

## Scripts

Here is a brief overview of each script in this repository:

- `run_post.sh`: This is the main script that automates the process of running all other scripts. Use "chmod +x ./run_post.sh" in the Terminal to give it permission and run it in the Terminal with "./run_post.sh".
- `Motion_Extraction.sh`: This script extracts relevant motion data, forces and moments data, velocity data, and Courant number data from OpenFOAM log files. The script only deals with the situation that each time step contains FOUR iterations. For dynamic iterations situations, you will need to modify the script to suit your specific settings.
- `createWGs_T150.py`: This Python script creates wave gauges for cases with a wave period of 1.50 s. It uses ParaView and pvpython to implement this task and deals with certain OpenFOAM problems that create several wave gauges for cases and output surface elevation to CSV files.
- `extractSE.py`: This Python script extracts surface elevation data from CSV files generated by createWGs_T150.py and generates .txt files for each gauge.

## MATLAB code for further extractions

This repository contains a MATLAB code that can be used to process motion data from .txt and .txt files in all subfolders. With this code, you can easily import and process data, calculate Euler angles and water surface elevation, and save the output in .mat files.

`processMotions.m`: The user can choose which data files to import and process through the flags at the beginning of the script. There are three flags available:

1. `import_motions`: Whether to import translation and orientation data. Set to 1 to import, 0 otherwise. Default: 1.
2. `import_forces_moments`: Whether to import forces and moments data. Set to 1 to import, 0 otherwise. Default: 1.
3. `import_waveGauges`: Whether to import water surface elevation data from wave gauges. Set to 1 to import, 0 otherwise. Default: 1.

Once you have set the flags according to your needs, simply run the script in MATLAB.

## License

This repository is licensed under [MIT License](https://github.com/github/choosealicense.com/blob/gh-pages/LICENSE.md).

## Contributions

Contributions are welcome! If you have any suggestions or improvements for these scripts, please feel free to submit a pull request or open an issue on Github.

## Acknowledgments

This code was developed by Shuijin Li at Dundee University.
